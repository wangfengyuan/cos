{"nodes":[{"width":300,"height":331,"id":"openAIEmbeddings_0","position":{"x":520.9310569632654,"y":603.5893286677534},"type":"customNode","data":{"id":"openAIEmbeddings_0","label":"OpenAI Embeddings","name":"openAIEmbeddings","type":"OpenAIEmbeddings","baseClasses":["OpenAIEmbeddings","Embeddings"],"category":"Embeddings","description":"OpenAI API to generate embeddings for a given text","inputParams":[{"label":"OpenAI Api Key","name":"openAIApiKey","type":"password","id":"openAIEmbeddings_0-input-openAIApiKey-password"},{"label":"Strip New Lines","name":"stripNewLines","type":"boolean","optional":true,"additionalParams":true,"id":"openAIEmbeddings_0-input-stripNewLines-boolean"},{"label":"Batch Size","name":"batchSize","type":"number","optional":true,"additionalParams":true,"id":"openAIEmbeddings_0-input-batchSize-number"},{"label":"Timeout","name":"timeout","type":"number","optional":true,"additionalParams":true,"id":"openAIEmbeddings_0-input-timeout-number"},{"label":"BasePath","name":"basepath","type":"string","optional":true,"additionalParams":true,"id":"openAIEmbeddings_0-input-basepath-string"}],"inputAnchors":[],"inputs":{"stripNewLines":"","batchSize":"","timeout":"","basepath":"https://wfyapi.ink/v1"},"outputAnchors":[{"id":"openAIEmbeddings_0-output-openAIEmbeddings-OpenAIEmbeddings|Embeddings","name":"openAIEmbeddings","label":"OpenAIEmbeddings","type":"OpenAIEmbeddings | Embeddings"}],"outputs":{},"selected":false},"selected":false,"positionAbsolute":{"x":520.9310569632654,"y":603.5893286677534},"dragging":false},{"width":300,"height":526,"id":"chatOpenAI_0","position":{"x":1353.3772979203911,"y":-104.84898026905296},"type":"customNode","data":{"id":"chatOpenAI_0","label":"ChatOpenAI","name":"chatOpenAI","type":"ChatOpenAI","baseClasses":["ChatOpenAI","BaseChatModel","BaseLanguageModel"],"category":"Chat Models","description":"Wrapper around OpenAI large language models that use the Chat endpoint","inputParams":[{"label":"OpenAI Api Key","name":"openAIApiKey","type":"password","id":"chatOpenAI_0-input-openAIApiKey-password"},{"label":"Model Name","name":"modelName","type":"options","options":[{"label":"gpt-4","name":"gpt-4"},{"label":"gpt-4-0613","name":"gpt-4-0613"},{"label":"gpt-4-32k","name":"gpt-4-32k"},{"label":"gpt-4-32k-0613","name":"gpt-4-32k-0613"},{"label":"gpt-3.5-turbo","name":"gpt-3.5-turbo"},{"label":"gpt-3.5-turbo-0613","name":"gpt-3.5-turbo-0613"},{"label":"gpt-3.5-turbo-16k","name":"gpt-3.5-turbo-16k"},{"label":"gpt-3.5-turbo-16k-0613","name":"gpt-3.5-turbo-16k-0613"}],"default":"gpt-3.5-turbo","optional":true,"id":"chatOpenAI_0-input-modelName-options"},{"label":"Temperature","name":"temperature","type":"number","default":0.9,"optional":true,"id":"chatOpenAI_0-input-temperature-number"},{"label":"Max Tokens","name":"maxTokens","type":"number","optional":true,"additionalParams":true,"id":"chatOpenAI_0-input-maxTokens-number"},{"label":"Top Probability","name":"topP","type":"number","optional":true,"additionalParams":true,"id":"chatOpenAI_0-input-topP-number"},{"label":"Frequency Penalty","name":"frequencyPenalty","type":"number","optional":true,"additionalParams":true,"id":"chatOpenAI_0-input-frequencyPenalty-number"},{"label":"Presence Penalty","name":"presencePenalty","type":"number","optional":true,"additionalParams":true,"id":"chatOpenAI_0-input-presencePenalty-number"},{"label":"Timeout","name":"timeout","type":"number","optional":true,"additionalParams":true,"id":"chatOpenAI_0-input-timeout-number"},{"label":"BasePath","name":"basepath","type":"string","optional":true,"additionalParams":true,"id":"chatOpenAI_0-input-basepath-string"}],"inputAnchors":[],"inputs":{"modelName":"gpt-3.5-turbo","temperature":"0.2","maxTokens":"","topP":"","frequencyPenalty":"","presencePenalty":"","timeout":"","basepath":"https://wfyapi.ink/v1"},"outputAnchors":[{"id":"chatOpenAI_0-output-chatOpenAI-ChatOpenAI|BaseChatModel|BaseLanguageModel","name":"chatOpenAI","label":"ChatOpenAI","type":"ChatOpenAI | BaseChatModel | BaseLanguageModel"}],"outputs":{},"selected":false},"selected":false,"positionAbsolute":{"x":1353.3772979203911,"y":-104.84898026905296},"dragging":false},{"width":300,"height":431,"id":"conversationalRetrievalQAChain_0","position":{"x":1817.1158298492567,"y":216.04247091889306},"type":"customNode","data":{"id":"conversationalRetrievalQAChain_0","label":"Conversational Retrieval QA Chain","name":"conversationalRetrievalQAChain","type":"ConversationalRetrievalQAChain","baseClasses":["ConversationalRetrievalQAChain","BaseChain"],"category":"Chains","description":"Document QA - built on RetrievalQAChain to provide a chat history component","inputParams":[{"label":"Return Source Documents","name":"returnSourceDocuments","type":"boolean","optional":true,"id":"conversationalRetrievalQAChain_0-input-returnSourceDocuments-boolean"},{"label":"System Message","name":"systemMessagePrompt","type":"string","rows":4,"additionalParams":true,"optional":true,"placeholder":"I want you to act as a document that I am having a conversation with. Your name is \"AI Assistant\". You will provide me with answers from the given info. If the answer is not included, say exactly \"Hmm, I am not sure.\" and stop after that. Refuse to answer any question not about the info. Never break character.","id":"conversationalRetrievalQAChain_0-input-systemMessagePrompt-string"},{"label":"Chain Option","name":"chainOption","type":"options","options":[{"label":"MapReduceDocumentsChain","name":"map_reduce","description":"Suitable for QA tasks over larger documents and can run the preprocessing step in parallel, reducing the running time"},{"label":"RefineDocumentsChain","name":"refine","description":"Suitable for QA tasks over a large number of documents."},{"label":"StuffDocumentsChain","name":"stuff","description":"Suitable for QA tasks over a small number of documents."}],"additionalParams":true,"optional":true,"id":"conversationalRetrievalQAChain_0-input-chainOption-options"}],"inputAnchors":[{"label":"Language Model","name":"model","type":"BaseLanguageModel","id":"conversationalRetrievalQAChain_0-input-model-BaseLanguageModel"},{"label":"Vector Store Retriever","name":"vectorStoreRetriever","type":"BaseRetriever","id":"conversationalRetrievalQAChain_0-input-vectorStoreRetriever-BaseRetriever"}],"inputs":{"model":"{{chatOpenAI_0.data.instance}}","vectorStoreRetriever":"{{faissUpsert_0.data.instance}}","returnSourceDocuments":false,"systemMessagePrompt":"","chainOption":""},"outputAnchors":[{"id":"conversationalRetrievalQAChain_0-output-conversationalRetrievalQAChain-ConversationalRetrievalQAChain|BaseChain","name":"conversationalRetrievalQAChain","label":"ConversationalRetrievalQAChain","type":"ConversationalRetrievalQAChain | BaseChain"}],"outputs":{},"selected":false},"positionAbsolute":{"x":1817.1158298492567,"y":216.04247091889306},"selected":false,"dragging":false},{"width":300,"height":459,"id":"faissUpsert_0","position":{"x":1325.569634815254,"y":486.636229647409},"type":"customNode","data":{"id":"faissUpsert_0","label":"Faiss Upsert Document","name":"faissUpsert","type":"Faiss","baseClasses":["Faiss","VectorStoreRetriever","BaseRetriever"],"category":"Vector Stores","description":"Upsert documents to Faiss","inputParams":[{"label":"Base Path to store","name":"basePath","description":"Path to store faiss.index file","placeholder":"C:\\Users\\User\\Desktop","type":"string","id":"faissUpsert_0-input-basePath-string"},{"label":"Top K","name":"topK","description":"Number of top results to fetch. Default to 4","placeholder":"4","type":"number","additionalParams":true,"optional":true,"id":"faissUpsert_0-input-topK-number"}],"inputAnchors":[{"label":"Document","name":"document","type":"Document","list":true,"id":"faissUpsert_0-input-document-Document"},{"label":"Embeddings","name":"embeddings","type":"Embeddings","id":"faissUpsert_0-input-embeddings-Embeddings"}],"inputs":{"document":["{{notionDB_0.data.instance}}"],"embeddings":"{{openAIEmbeddings_0.data.instance}}","basePath":"/data/faiss","topK":""},"outputAnchors":[{"name":"output","label":"Output","type":"options","options":[{"id":"faissUpsert_0-output-retriever-Faiss|VectorStoreRetriever|BaseRetriever","name":"retriever","label":"Faiss Retriever","type":"Faiss | VectorStoreRetriever | BaseRetriever"},{"id":"faissUpsert_0-output-vectorStore-Faiss|SaveableVectorStore|VectorStore","name":"vectorStore","label":"Faiss Vector Store","type":"Faiss | SaveableVectorStore | VectorStore"}],"default":"retriever"}],"outputs":{"output":"retriever"},"selected":false},"positionAbsolute":{"x":1325.569634815254,"y":486.636229647409},"selected":false,"dragging":false},{"width":300,"height":378,"id":"recursiveCharacterTextSplitter_0","position":{"x":510.91878944848577,"y":52.56818778833829},"type":"customNode","data":{"id":"recursiveCharacterTextSplitter_0","label":"Recursive Character Text Splitter","name":"recursiveCharacterTextSplitter","type":"RecursiveCharacterTextSplitter","baseClasses":["RecursiveCharacterTextSplitter","TextSplitter"],"category":"Text Splitters","description":"Split documents recursively by different characters - starting with \"\\n\\n\", then \"\\n\", then \" \"","inputParams":[{"label":"Chunk Size","name":"chunkSize","type":"number","default":1000,"optional":true,"id":"recursiveCharacterTextSplitter_0-input-chunkSize-number"},{"label":"Chunk Overlap","name":"chunkOverlap","type":"number","optional":true,"id":"recursiveCharacterTextSplitter_0-input-chunkOverlap-number"}],"inputAnchors":[],"inputs":{"chunkSize":1000,"chunkOverlap":"50"},"outputAnchors":[{"id":"recursiveCharacterTextSplitter_0-output-recursiveCharacterTextSplitter-RecursiveCharacterTextSplitter|TextSplitter","name":"recursiveCharacterTextSplitter","label":"RecursiveCharacterTextSplitter","type":"RecursiveCharacterTextSplitter | TextSplitter"}],"outputs":{},"selected":false},"selected":false,"positionAbsolute":{"x":510.91878944848577,"y":52.56818778833829},"dragging":false},{"width":300,"height":580,"id":"notionDB_0","position":{"x":953.5389108255922,"y":-39.20631457709433},"type":"customNode","data":{"id":"notionDB_0","label":"Notion Database","name":"notionDB","type":"Document","baseClasses":["Document"],"category":"Document Loaders","description":"Load data from Notion Database ID","inputParams":[{"label":"Notion Database Id","name":"databaseId","type":"string","description":"If your URL looks like - https://www.notion.so/<long_hash_1>?v=<long_hash_2>, then <long_hash_1> is the database ID","id":"notionDB_0-input-databaseId-string"},{"label":"Notion Integration Token","name":"notionIntegrationToken","type":"password","description":"You can find integration token <a target=\"_blank\" href=\"https://developers.notion.com/docs/create-a-notion-integration#step-1-create-an-integration\">here</a>","id":"notionDB_0-input-notionIntegrationToken-password"},{"label":"Page Size Limit","name":"pageSizeLimit","type":"number","default":10,"id":"notionDB_0-input-pageSizeLimit-number"},{"label":"Metadata","name":"metadata","type":"json","optional":true,"additionalParams":true,"id":"notionDB_0-input-metadata-json"}],"inputAnchors":[{"label":"Text Splitter","name":"textSplitter","type":"TextSplitter","optional":true,"id":"notionDB_0-input-textSplitter-TextSplitter"}],"inputs":{"textSplitter":"{{recursiveCharacterTextSplitter_0.data.instance}}","databaseId":"3fdac18030394399ae73a019054ce28f","pageSizeLimit":10,"metadata":""},"outputAnchors":[{"id":"notionDB_0-output-notionDB-Document","name":"notionDB","label":"Document","type":"Document"}],"outputs":{},"selected":false},"selected":false,"positionAbsolute":{"x":953.5389108255922,"y":-39.20631457709433},"dragging":false}],"edges":[{"source":"chatOpenAI_0","sourceHandle":"chatOpenAI_0-output-chatOpenAI-ChatOpenAI|BaseChatModel|BaseLanguageModel","target":"conversationalRetrievalQAChain_0","targetHandle":"conversationalRetrievalQAChain_0-input-model-BaseLanguageModel","type":"buttonedge","id":"chatOpenAI_0-chatOpenAI_0-output-chatOpenAI-ChatOpenAI|BaseChatModel|BaseLanguageModel-conversationalRetrievalQAChain_0-conversationalRetrievalQAChain_0-input-model-BaseLanguageModel","data":{"label":""}},{"source":"openAIEmbeddings_0","sourceHandle":"openAIEmbeddings_0-output-openAIEmbeddings-OpenAIEmbeddings|Embeddings","target":"faissUpsert_0","targetHandle":"faissUpsert_0-input-embeddings-Embeddings","type":"buttonedge","id":"openAIEmbeddings_0-openAIEmbeddings_0-output-openAIEmbeddings-OpenAIEmbeddings|Embeddings-faissUpsert_0-faissUpsert_0-input-embeddings-Embeddings","data":{"label":""}},{"source":"faissUpsert_0","sourceHandle":"faissUpsert_0-output-retriever-Faiss|VectorStoreRetriever|BaseRetriever","target":"conversationalRetrievalQAChain_0","targetHandle":"conversationalRetrievalQAChain_0-input-vectorStoreRetriever-BaseRetriever","type":"buttonedge","id":"faissUpsert_0-faissUpsert_0-output-retriever-Faiss|VectorStoreRetriever|BaseRetriever-conversationalRetrievalQAChain_0-conversationalRetrievalQAChain_0-input-vectorStoreRetriever-BaseRetriever","data":{"label":""}},{"source":"recursiveCharacterTextSplitter_0","sourceHandle":"recursiveCharacterTextSplitter_0-output-recursiveCharacterTextSplitter-RecursiveCharacterTextSplitter|TextSplitter","target":"notionDB_0","targetHandle":"notionDB_0-input-textSplitter-TextSplitter","type":"buttonedge","id":"recursiveCharacterTextSplitter_0-recursiveCharacterTextSplitter_0-output-recursiveCharacterTextSplitter-RecursiveCharacterTextSplitter|TextSplitter-notionDB_0-notionDB_0-input-textSplitter-TextSplitter","data":{"label":""}},{"source":"notionDB_0","sourceHandle":"notionDB_0-output-notionDB-Document","target":"faissUpsert_0","targetHandle":"faissUpsert_0-input-document-Document","type":"buttonedge","id":"notionDB_0-notionDB_0-output-notionDB-Document-faissUpsert_0-faissUpsert_0-input-document-Document","data":{"label":""}}]}